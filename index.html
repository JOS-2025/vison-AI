<!-- Replace the <body> and <script> sections of your file with this updated version -->

<body class="antialiased selection:bg-brand-500 selection:text-white">

    <!-- [Navigation stays the same as before] -->

    <!-- Hero Section -->
    <header class="relative min-h-screen flex items-center justify-center pt-20 overflow-hidden">
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-brand-600/20 rounded-full blur-[120px] -z-10 animate-pulse-slow"></div>

        <div class="max-w-7xl mx-auto px-6 text-center z-10 relative">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full glass-panel mb-8 reveal-up">
                <span class="w-2 h-2 rounded-full bg-green-400 animate-pulse"></span>
                <span class="text-xs font-medium text-gray-300">System Online: GPU Clusters Ready</span>
            </div>
            
            <h1 class="font-display text-5xl md:text-7xl lg:text-8xl font-bold leading-tight mb-6">
                <div class="overflow-hidden"><span class="block reveal-text">Turn text into</span></div>
                <div class="overflow-hidden"><span class="block reveal-text clip-text-image">cinematic video.</span></div>
            </h1>
            
            <p class="text-lg md:text-xl text-gray-400 max-w-2xl mx-auto mb-6 reveal-up leading-relaxed">
                Create production-grade videos from simple text prompts. Powered by VisionAI-v2.
            </p>

            <!-- Real Prompt Input -->
            <div class="reveal-up mb-8">
                <textarea
                    id="prompt"
                    placeholder="Describe your video (e.g., A cyberpunk samurai walking through Neo-Tokyo in the rain)..."
                    class="w-full max-w-2xl mx-auto p-4 rounded-xl bg-dark-800 border border-white/10 text-white focus:outline-none focus:border-brand-500 focus:ring-1 focus:ring-brand-500 transition-all resize-none h-24"
                ></textarea>
            </div>
            
            <div class="flex flex-col sm:flex-row items-center justify-center gap-4 reveal-up">
                <button id="generateBtn" onclick="generateVideo()" class="px-8 py-4 rounded-full bg-brand-600 hover:bg-brand-500 text-white font-semibold transition-all hover:scale-105 shadow-[0_0_40px_-10px_rgba(79,70,229,0.5)] disabled:opacity-50 disabled:cursor-not-allowed">
                    Generate Video Free
                </button>
            </div>

            <!-- Dashboard Preview (The "Work" Canvas) -->
            <div class="mt-20 relative mx-auto max-w-5xl rounded-xl border border-white/10 shadow-2xl overflow-hidden glass-panel hero-dashboard opacity-0 translate-y-20">
                <div class="h-12 border-b border-white/5 bg-dark-800/50 flex items-center px-4 gap-2">
                    <div class="flex gap-1.5">
                        <div class="w-3 h-3 rounded-full bg-red-500/20"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-500/20"></div>
                        <div class="w-3 h-3 rounded-full bg-green-500/20"></div>
                    </div>
                    <div class="ml-4 text-xs font-mono text-gray-500" id="filename-display">vision_ai_v2.0.mp4</div>
                </div>

                <div class="grid grid-cols-12 h-[400px] md:h-[500px]">
                    <div class="col-span-12 p-8 relative flex flex-col items-center justify-center bg-black" id="canvas-area">
                        
                        <!-- Video Player (Hidden by default) -->
                        <video id="outputVideo" class="hidden absolute inset-0 w-full h-full object-cover" controls autoplay loop></video>

                        <!-- Progress UI -->
                        <div id="processing-ui" class="hidden text-center z-10">
                            <div class="w-16 h-16 border-4 border-brand-500 border-t-transparent rounded-full animate-spin mx-auto mb-6"></div>
                            <div class="w-64 h-1.5 bg-gray-800 rounded-full mx-auto mb-4 overflow-hidden">
                                <div id="progress-bar" class="h-full bg-brand-500 transition-all duration-500" style="width: 0%"></div>
                            </div>
                            <p id="status-text" class="text-brand-500 font-mono text-sm uppercase tracking-widest">Initializing Engines...</p>
                            <p id="timer-text" class="text-gray-500 font-mono text-xs mt-2">Est. time: 45s</p>
                        </div>

                        <!-- Idle UI -->
                        <div id="idle-ui" class="text-center">
                            <div class="w-12 h-12 border border-white/10 rounded-full flex items-center justify-center mx-auto mb-4">
                                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                            </div>
                            <p class="text-gray-500 font-mono text-sm">Enter prompt above to begin rendering</p>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- [Rest of the HTML sections: Features, Pricing, etc. remain exactly the same] -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <script>
        // --- PREVIOUS GSAP ANIMATIONS (RETAINED) ---
        gsap.registerPlugin(ScrollTrigger);
        const tl = gsap.timeline();
        tl.to('.reveal-text', { y: 0, autoAlpha: 1, duration: 1, stagger: 0.2, ease: "power4.out" })
          .to('.reveal-up', { y: 0, autoAlpha: 1, duration: 0.8, stagger: 0.1, ease: "power2.out" }, "-=0.5")
          .to('.hero-dashboard', { y: 0, opacity: 1, duration: 1.2, ease: "power3.out" }, "-=0.6");

        // --- NEW: THE "WORKING MACHINE" LOGIC ---

        const SIMULATION_MODE = true; // Set to FALSE when you have a real URL
        const BACKEND_API_URL = "https://YOUR-BACKEND-URL/api/generate";

        async function generateVideo() {
            const promptInput = document.getElementById("prompt");
            const btn = document.getElementById("generateBtn");
            const prompt = promptInput.value.trim();

            if (!prompt) return alert("Please describe your video.");

            // 1. UI Setup
            toggleUIState('processing');
            updateProgress(5, "Contacting GPU Cluster...");

            if (SIMULATION_MODE) {
                simulateWorkflow();
            } else {
                try {
                    // 2. Initial Request to Backend
                    const response = await fetch(BACKEND_API_URL, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ prompt })
                    });
                    const data = await response.json();
                    
                    // 3. Start Polling using the Prediction ID
                    pollStatus(data.id); 
                } catch (err) {
                    handleError();
                }
            }
        }

        // The Polling Loop: Checks status every 3 seconds
        async function pollStatus(predictionId) {
            const pollInterval = setInterval(async () => {
                try {
                    const res = await fetch(`${BACKEND_API_URL}/status/${predictionId}`);
                    const data = await res.json();

                    if (data.status === "processing") {
                        updateProgress(45, "Rendering Frames...");
                    } else if (data.status === "succeeded") {
                        clearInterval(pollInterval);
                        showFinalVideo(data.videoUrl);
                    } else if (data.status === "failed") {
                        clearInterval(pollInterval);
                        handleError();
                    }
                } catch (e) {
                    console.error("Polling error", e);
                }
            }, 3000);
        }

        // --- UI HELPER FUNCTIONS ---

        function toggleUIState(state) {
            const idle = document.getElementById('idle-ui');
            const processing = document.getElementById('processing-ui');
            const video = document.getElementById('outputVideo');
            const btn = document.getElementById('generateBtn');

            if (state === 'processing') {
                idle.classList.add('hidden');
                video.classList.add('hidden');
                processing.classList.remove('hidden');
                btn.disabled = true;
                btn.innerText = "Generating...";
            } else if (state === 'success') {
                processing.classList.add('hidden');
                video.classList.remove('hidden');
                btn.disabled = false;
                btn.innerText = "Generate Video Free";
            }
        }

        function updateProgress(percent, text) {
            document.getElementById('progress-bar').style.width = percent + "%";
            document.getElementById('status-text').innerText = text;
        }

        function showFinalVideo(url) {
            const video = document.getElementById('outputVideo');
            video.src = url;
            toggleUIState('success');
            updateProgress(0, "");
        }

        function handleError() {
            alert("The GPU cluster is busy. Please try again in a moment.");
            toggleUIState('success'); // Resets button
            document.getElementById('idle-ui').classList.remove('hidden');
            document.getElementById('processing-ui').classList.add('hidden');
        }

        // Simulation for demo purposes
        function simulateWorkflow() {
            setTimeout(() => updateProgress(20, "Waking up Stable Diffusion..."), 1000);
            setTimeout(() => updateProgress(45, "Synthesizing Motion Vectors..."), 3000);
            setTimeout(() => updateProgress(75, "Applying 4K Upscaling..."), 6000);
            setTimeout(() => updateProgress(95, "Finalizing Export..."), 8000);
            setTimeout(() => {
                // Using a high-quality abstract video as a placeholder
                showFinalVideo("https://assets.mixkit.co/videos/preview/mixkit-abstract-flowing-purple-and-blue-neon-liquid-20164-large.mp4");
            }, 9500);
        }
    </script>
</body>
